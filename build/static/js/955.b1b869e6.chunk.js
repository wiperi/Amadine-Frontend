"use strict";(self.webpackChunkreact_basic=self.webpackChunkreact_basic||[]).push([[955],{93548:(e,s,t)=>{t.d(s,{Y:()=>n});var l=t(2761),a=t(70579);const n=e=>{let{players:s}=e;return(0,a.jsx)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6",children:s.map((e=>(0,a.jsxs)("div",{className:"flex h-32 items-center justify-center gap-4 rounded-lg bg-slate-700",children:[(0,a.jsx)(l.A,{size:"large",src:`https://xsgames.co/randomusers/avatar.php?g=pixel&key=${e}`}),"Player ",e]},e)))})}},48955:(e,s,t)=>{t.r(s),t.d(s,{StateContext:()=>j,default:()=>p});var l=t(65043),a=t(70579);const n=e=>{let{progress:s,barColor:t}=e;return(0,a.jsx)("div",{className:"w-1/2 h-6 rounded-full bg-slate-700",children:(0,a.jsx)("div",{className:"h-6 rounded-full "+("blue"===t?"bg-blue-500":"bg-green-500"),style:{width:`${s}%`,transition:"width 16ms linear"}})})};var r=t(18705),o=t(82854),c=t(66925),i=t(22019);const d=()=>{const{state:e,atQuestion:s,playerId:t}=(0,l.useContext)(j),[d,x]=(0,l.useState)(void 0);(0,l.useEffect)((()=>{e===o.nJ.QUESTION_OPEN&&(0,c.Q)((async()=>{const{data:e}=await(0,r.Id)(t,s);x(e)}))}),[e]);const[u,f]=(0,l.useState)(0),[m,h]=(0,l.useState)(!1),[N,v]=(0,l.useState)("blue"),[g,p]=(0,l.useState)(new Set);return(0,l.useEffect)((()=>{let e,s=Date.now();const t=()=>{const t=Date.now()-s,l=Math.min(100,t/3e3*100);f(l),l>=100&&clearInterval(e)},l=()=>{const t=Date.now()-s,l=Math.max(0,100*(1-t/(1e3*d.duration)));f(l),l<=0&&clearInterval(e)};return d?(h(!0),v("green"),e=setInterval(l,16)):e=setInterval(t,16),()=>clearInterval(e)}),[d]),(0,a.jsx)("div",{className:"min-h-screen w-full bg-slate-800 text-white",children:(0,a.jsxs)("div",{className:"flex min-h-screen flex-col justify-center gap-8 p-8",children:[(0,a.jsx)("h1",{className:"text-center text-5xl font-bold",children:"blue"===N?"Next question is comming!":null===d||void 0===d?void 0:d.question}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(n,{progress:u,barColor:N})}),(0,a.jsx)("div",{className:`grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 ${m?"opacity-100":"opacity-0"} transition-opacity duration-500 ease-in-out`,children:null===d||void 0===d?void 0:d.answers.map((e=>(0,a.jsx)("button",{className:`rounded-lg ${g.has(e.answerId)?"bg-blue-500":"bg-slate-700"} p-6 text-xl font-semibold text-white hover:bg-blue-500`,onClick:async()=>{if(g.has(e.answerId)){if(1===g.size)return void i.Ay.warning("You should at least select one answer");g.delete(e.answerId),p(new Set(g))}else g.add(e.answerId),p(new Set(g));(0,c.Q)((async()=>{await(0,r.sE)(Array.from(g),t,s)}))},children:e.answer},e.answerId)))})]})})};var x=t(93548);const u=e=>{var s;let{results:t,questionPosition:l}=e;return(0,a.jsxs)("div",{className:"flex flex-col justify-center gap-8 p-8",children:[(0,a.jsxs)("h1",{className:"text-center text-5xl font-bold",children:["Question ",l]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 rounded-lg bg-slate-700 p-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Average answer time"}),(0,a.jsxs)("p",{className:"text-4xl font-bold",children:[null===t||void 0===t?void 0:t.averageAnswerTime,"s"]})]}),(0,a.jsxs)("div",{className:"flex-1 rounded-lg bg-slate-700 p-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Percentage of correct answers"}),(0,a.jsxs)("p",{className:"text-4xl font-bold",children:[null===t||void 0===t?void 0:t.percentCorrect,"%"]})]})]}),(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Correct Players"}),(0,a.jsx)(x.Y,{players:null!==(s=null===t||void 0===t?void 0:t.playersCorrectList)&&void 0!==s?s:[]})]})},f=()=>{var e;const{playerId:s,atQuestion:t}=(0,l.useContext)(j),[n,o]=(0,l.useState)(void 0);return(0,l.useEffect)((()=>{(0,c.Q)((async()=>{const{data:e}=await(0,r.vb)(s,t);o(e),console.log("results",e)}))}),[]),(0,a.jsx)("div",{className:"min-h-screen w-full bg-slate-800 text-white",children:(0,a.jsxs)("div",{className:"flex min-h-screen flex-col justify-center gap-8 p-8",children:[(0,a.jsxs)("h1",{className:"text-center text-5xl font-bold",children:["Question ",t+1]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 rounded-lg bg-slate-700 p-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Average answer time"}),(0,a.jsxs)("p",{className:"text-4xl font-bold",children:[null===n||void 0===n?void 0:n.averageAnswerTime,"s"]})]}),(0,a.jsxs)("div",{className:"flex-1 rounded-lg bg-slate-700 p-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Percentage of correct answers"}),(0,a.jsxs)("p",{className:"text-4xl font-bold",children:[null===n||void 0===n?void 0:n.percentCorrect,"%"]})]})]}),(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Correct Players"}),(0,a.jsx)(x.Y,{players:null!==(e=null===n||void 0===n?void 0:n.playersCorrectList)&&void 0!==e?e:[]})]})})};var m=t(2761),h=t(53722);const N=()=>{const{playerId:e}=(0,l.useContext)(j),[s,t]=(0,l.useState)(void 0);return(0,l.useEffect)((()=>{(0,c.Q)((async()=>{const{data:s}=await(0,r.hA)(e);t(s),console.log("results",s)}))}),[]),(0,a.jsx)("div",{className:"min-h-screen w-full bg-slate-800 text-white",children:(0,a.jsxs)("div",{className:"flex min-h-screen flex-col justify-center gap-8 p-8",children:[(0,a.jsx)("h1",{className:"text-center text-5xl font-bold",children:"Final Result"}),(0,a.jsx)("h1",{className:"text-center text-3xl font-bold",children:"Top Players"}),(0,a.jsx)("div",{className:"mx-auto flex w-full flex-col gap-4 md:w-1/2 xl:w-1/3",children:null===s||void 0===s?void 0:s.usersRankedByScore.map((e=>(0,a.jsxs)("div",{className:"flex items-center gap-4 rounded-lg bg-slate-700 p-6",children:[(0,a.jsx)(m.A,{size:"large",icon:(0,a.jsx)(h.A,{})}),(0,a.jsxs)("div",{className:"flex flex-1 items-center justify-between",children:[(0,a.jsx)("span",{className:"text-xl font-semibold",children:e.name}),(0,a.jsxs)("span",{className:"text-xl font-bold",children:[e.score," points"]})]})]},e.name)))}),null===s||void 0===s?void 0:s.questionResults.map(((e,s)=>(0,a.jsx)(u,{results:e,questionPosition:s+1},s)))]})})};var v=t(35475);const g=()=>(0,a.jsx)("div",{className:"h-screen w-full bg-slate-800 text-white",children:(0,a.jsx)("div",{className:"flex h-full flex-col p-8",children:(0,a.jsx)("div",{className:"flex flex-1 items-center justify-center",children:(0,a.jsx)("h1",{className:"text-center text-5xl font-bold",children:"Question Closed"})})})}),j=(0,l.createContext)({state:o.nJ.LOBBY,numQuestions:-1,atQuestion:-1,playerId:-1,question:void 0}),p=()=>{console.log("QuizSession loaded");const[e]=(0,v.ok)();let s=(0,l.useMemo)((()=>({state:o.nJ.LOBBY,numQuestions:0,atQuestion:0,playerId:parseInt(e.get("playerId")||"-1"),question:void 0})),[]);const[t,n]=(0,l.useState)(s.state),i=async()=>{await(0,c.Q)((async()=>{const{data:{state:e,numQuestions:t,atQuestion:l}}=await(0,r.dn)(s.playerId);e!==s.state&&(console.log(`${s.state} -> ${e}`),s.state=e,n(e)),t!==s.numQuestions&&(s.numQuestions=t),l!==s.atQuestion&&(s.atQuestion=l)}))};return(0,l.useEffect)((()=>{console.log("useEffect");const e=setInterval(i,2e3);return()=>clearInterval(e)}),[]),(0,a.jsx)(j.Provider,{value:s,children:(0,a.jsxs)("div",{className:"min-h-screen w-full bg-slate-800 text-white",children:[s.state===o.nJ.LOBBY&&(0,a.jsx)("h1",{className:"absolute inset-0 flex items-center justify-center text-center text-5xl font-bold",children:"Waiting for game to start..."}),(s.state===o.nJ.QUESTION_OPEN||s.state===o.nJ.QUESTION_COUNTDOWN)&&(0,a.jsx)(d,{}),s.state===o.nJ.QUESTION_CLOSE&&(0,a.jsx)(g,{}),s.state===o.nJ.ANSWER_SHOW&&(0,a.jsx)(f,{}),s.state===o.nJ.FINAL_RESULTS&&(0,a.jsx)(N,{}),s.state===o.nJ.END&&(0,a.jsx)("div",{className:"flex h-screen items-center justify-center text-center text-5xl font-bold",children:"Game Ended"})]})})}},82854:(e,s,t)=>{t.d(s,{Ik:()=>a,nJ:()=>l});let l=function(e){return e.LOBBY="LOBBY",e.QUESTION_COUNTDOWN="QUESTION_COUNTDOWN",e.QUESTION_OPEN="QUESTION_OPEN",e.QUESTION_CLOSE="QUESTION_CLOSE",e.ANSWER_SHOW="ANSWER_SHOW",e.FINAL_RESULTS="FINAL_RESULTS",e.END="END",e}({}),a=function(e){return e.NEXT_QUESTION="NEXT_QUESTION",e.SKIP_COUNTDOWN="SKIP_COUNTDOWN",e.GO_TO_ANSWER="GO_TO_ANSWER",e.GO_TO_FINAL_RESULTS="GO_TO_FINAL_RESULTS",e.END="END",e}({})},66925:(e,s,t)=>{t.d(s,{Q:()=>n});var l=t(22019),a=t(8821);async function n(e){try{await e()}catch(n){var s,t;return n instanceof a.pe?l.Ay.error((null===(s=n.response)||void 0===s||null===(t=s.data)||void 0===t?void 0:t.error)||"Internal server error"):n instanceof Error?l.Ay.error(n.message):l.Ay.error("An unknown error occurred")}}},53722:(e,s,t)=>{t.d(s,{A:()=>c});var l=t(58168),a=t(65043);const n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"};var r=t(22172),o=function(e,s){return a.createElement(r.A,(0,l.A)({},e,{ref:s,icon:n}))};const c=a.forwardRef(o)},8821:(e,s,t)=>{t.d(s,{pe:()=>n});var l=t(86213);const{Axios:a,AxiosError:n,CanceledError:r,isCancel:o,CancelToken:c,VERSION:i,all:d,Cancel:x,isAxiosError:u,spread:f,toFormData:m,AxiosHeaders:h,HttpStatusCode:N,formToJSON:v,getAdapter:g,mergeConfig:j}=l.A}}]);
//# sourceMappingURL=955.b1b869e6.chunk.js.map