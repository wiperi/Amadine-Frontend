{"version":3,"file":"static/js/955.b1b869e6.chunk.js","mappings":"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","sources":["pages/QuizSession/PlayerList.tsx","pages/QuizSession/ProgressBar.tsx","pages/QuizSession/QuestionOpen.tsx","pages/QuizSession/AnswerShow.tsx","pages/QuizSession/FinalResult.tsx","pages/QuizSession/QuestionClose.tsx","pages/QuizSession/PlayerLobby.tsx","types/Enums.ts","utils/helpers.ts","../node_modules/@ant-design/icons-svg/es/asn/UserOutlined.js","../node_modules/@ant-design/icons/es/icons/UserOutlined.js","../node_modules/axios/index.js"],"sourcesContent":["import { Avatar } from 'antd';\r\n\r\nexport const PlayerList: React.FC<{ players: string[] }> = ({ players }) => {\r\n  return (\r\n    <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6\">\r\n      {players.map((player) => (\r\n        <div\r\n          key={player}\r\n          className=\"flex h-32 items-center justify-center gap-4 rounded-lg bg-slate-700\"\r\n        >\r\n          <Avatar\r\n            size=\"large\"\r\n            src={`https://xsgames.co/randomusers/avatar.php?g=pixel&key=${player}`}\r\n          />\r\n          Player {player}\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};","type ProgressBarProps = {\r\n  progress: number;\r\n  barColor?: 'blue' | 'green';\r\n};\r\n\r\nconst ProgressBar: React.FC<ProgressBarProps> = ({ progress, barColor }) => {\r\n  return (\r\n    <div className={`w-1/2 h-6 rounded-full bg-slate-700`}>\r\n      <div\r\n        className={`h-6 rounded-full ${barColor === 'blue' ? 'bg-blue-500' : 'bg-green-500'}`}\r\n        style={{ width: `${progress}%`, transition: 'width 16ms linear'}}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProgressBar;\r\n","import { useContext, useEffect, useReducer } from 'react';\r\nimport { useState } from 'react';\r\nimport ProgressBar from './ProgressBar';\r\nimport { StateContext } from './PlayerLobby';\r\nimport { playerGetQuestionInfo, playerSubmitAnswer } from '@/apis/quiz';\r\nimport { QuizSessionState as S } from '@/types/Enums';\r\nimport { catchAxiosError } from '@/utils/helpers';\r\nimport { Question } from '@/types/UserStore';\r\nimport { message } from 'antd';\r\n\r\nconst QuestionOpen: React.FC = () => {\r\n  const { state, atQuestion, playerId } = useContext(StateContext);\r\n\r\n  // Get question\r\n  const [question, setQuestion] = useState<Question | undefined>(undefined);\r\n  useEffect(() => {\r\n    if (state === S.QUESTION_OPEN) {\r\n      catchAxiosError(async () => {\r\n        const { data: question } = await playerGetQuestionInfo(playerId, atQuestion);\r\n        setQuestion(question as any);\r\n      });\r\n    }\r\n  }, [state]);\r\n\r\n  // Progress bar\r\n  const growDuration = 3; // Duration to grow from 0 to 100\r\n  const [progress, setProgress] = useState<number>(0);\r\n  const [answerDisplay, setAnswerDisplay] = useState(false);\r\n  const [barColor, setBarColor] = useState<'blue' | 'green'>('blue');\r\n  const [selectedAnswerIds, setSelectedAnswerIds] = useState<Set<number>>(new Set());\r\n\r\n  useEffect(() => {\r\n    let startTime = Date.now();\r\n\r\n    let interval: NodeJS.Timeout;\r\n\r\n    const grow = () => {\r\n      const elapsedTime = Date.now() - startTime;\r\n      const newProgress = Math.min(100, (elapsedTime / (growDuration * 1000)) * 100);\r\n      setProgress(newProgress);\r\n      if (newProgress >= 100) {\r\n        clearInterval(interval);\r\n      }\r\n    };\r\n\r\n    const shrink = () => {\r\n      const elapsedTime = Date.now() - startTime;\r\n      const newProgress = Math.max(0, 100 * (1 - elapsedTime / (question!.duration * 1000)));\r\n      setProgress(newProgress);\r\n      if (newProgress <= 0) {\r\n        clearInterval(interval);\r\n      }\r\n    };\r\n\r\n    if (!question) {\r\n      interval = setInterval(grow, 16);\r\n    } else {\r\n      setAnswerDisplay(true);\r\n      setBarColor('green');\r\n      interval = setInterval(shrink, 16);\r\n    }\r\n\r\n    return () => clearInterval(interval);\r\n  }, [question]);\r\n\r\n  return (\r\n    <div className=\"min-h-screen w-full bg-slate-800 text-white\">\r\n      <div className=\"flex min-h-screen flex-col justify-center gap-8 p-8\">\r\n        <h1 className=\"text-center text-5xl font-bold\">\r\n          {barColor === 'blue' ? 'Next question is comming!' : question?.question}\r\n        </h1>\r\n\r\n        <div className=\"flex justify-center\">\r\n          <ProgressBar progress={progress} barColor={barColor} />\r\n        </div>\r\n\r\n        <div\r\n          className={`grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 ${answerDisplay ? 'opacity-100' : 'opacity-0'} transition-opacity duration-500 ease-in-out`}\r\n        >\r\n          {question?.answers.map((a) => (\r\n            <button\r\n              key={a.answerId}\r\n              className={`rounded-lg ${selectedAnswerIds.has(a.answerId) ? 'bg-blue-500' : 'bg-slate-700'} p-6 text-xl font-semibold text-white hover:bg-blue-500`}\r\n              onClick={async () => {\r\n                if (selectedAnswerIds.has(a.answerId)) {\r\n                  // there should be at least one answer\r\n                  if (selectedAnswerIds.size === 1) {\r\n                    message.warning('You should at least select one answer');\r\n                    return;\r\n                  }\r\n\r\n                  selectedAnswerIds.delete(a.answerId);\r\n                  setSelectedAnswerIds(new Set(selectedAnswerIds));\r\n                } else {\r\n                  selectedAnswerIds.add(a.answerId);\r\n                  setSelectedAnswerIds(new Set(selectedAnswerIds));\r\n                }\r\n                \r\n                catchAxiosError(async () => {\r\n                  await playerSubmitAnswer(Array.from(selectedAnswerIds), playerId, atQuestion);\r\n                });\r\n              }}\r\n            >\r\n              {a.answer}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QuestionOpen;\r\n","import { useContext, useEffect, useState } from 'react';\r\nimport { PlayerList } from './PlayerList';\r\nimport { StateContext } from './PlayerLobby';\r\nimport { catchAxiosError } from '@/utils/helpers';\r\nimport { playerGetQuestionResult } from '@/apis/quiz';\r\nimport { PlayerGetQuestionResultReturned } from '@/types/ApiReturnType';\r\n\r\nconst AnswerShow: React.FC = () => {\r\n  const { playerId, atQuestion } = useContext(StateContext);\r\n\r\n  const [results, setResults] = useState<PlayerGetQuestionResultReturned | undefined>(undefined);\r\n\r\n  useEffect(() => {\r\n    catchAxiosError(async () => {\r\n      const { data: results } = await playerGetQuestionResult(playerId, atQuestion);\r\n      setResults(results);\r\n      console.log('results', results);\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"min-h-screen w-full bg-slate-800 text-white\">\r\n      <div className=\"flex min-h-screen flex-col justify-center gap-8 p-8\">\r\n        <h1 className=\"text-center text-5xl font-bold\">Question {atQuestion + 1}</h1>\r\n\r\n        <div className=\"flex gap-4\">\r\n          <div className=\"flex-1 rounded-lg bg-slate-700 p-4\">\r\n            <h2 className=\"text-2xl font-bold\">Average answer time</h2>\r\n            <p className=\"text-4xl font-bold\">{results?.averageAnswerTime}s</p>\r\n          </div>\r\n          <div className=\"flex-1 rounded-lg bg-slate-700 p-4\">\r\n            <h2 className=\"text-2xl font-bold\">Percentage of correct answers</h2>\r\n            <p className=\"text-4xl font-bold\">{results?.percentCorrect}%</p>\r\n          </div>\r\n        </div>\r\n\r\n        <h1 className=\"text-3xl font-bold\">Correct Players</h1>\r\n        <PlayerList players={results?.playersCorrectList ?? []} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const QuestionResult: React.FC<{\r\n  results: PlayerGetQuestionResultReturned;\r\n  questionPosition: number;\r\n}> = ({ results, questionPosition }) => {\r\n  return (\r\n    <div className=\"flex flex-col justify-center gap-8 p-8\">\r\n      <h1 className=\"text-center text-5xl font-bold\">Question {questionPosition}</h1>\r\n\r\n      <div className=\"flex gap-4\">\r\n        <div className=\"flex-1 rounded-lg bg-slate-700 p-4\">\r\n          <h2 className=\"text-2xl font-bold\">Average answer time</h2>\r\n          <p className=\"text-4xl font-bold\">{results?.averageAnswerTime}s</p>\r\n        </div>\r\n        <div className=\"flex-1 rounded-lg bg-slate-700 p-4\">\r\n          <h2 className=\"text-2xl font-bold\">Percentage of correct answers</h2>\r\n          <p className=\"text-4xl font-bold\">{results?.percentCorrect}%</p>\r\n        </div>\r\n      </div>\r\n\r\n      <h1 className=\"text-3xl font-bold\">Correct Players</h1>\r\n      <PlayerList players={results?.playersCorrectList ?? []} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AnswerShow;\r\n","import { Avatar } from 'antd';\r\nimport { UserOutlined } from '@ant-design/icons';\r\nimport { useContext, useEffect, useState } from 'react';\r\nimport { StateContext } from './PlayerLobby';\r\nimport { catchAxiosError } from '@/utils/helpers';\r\nimport { playerGetSessionResult } from '@/apis/quiz';\r\nimport { PlayerGetSessionResultReturned } from '@/types/ApiReturnType';\r\nimport { QuestionResult } from './AnswerShow';\r\n\r\nconst FinalResult: React.FC = () => {\r\n  const { playerId } = useContext(StateContext);\r\n\r\n  const [results, setResults] = useState<PlayerGetSessionResultReturned | undefined>(undefined);\r\n  useEffect(() => {\r\n    catchAxiosError(async () => {\r\n      const { data: results } = await playerGetSessionResult(playerId);\r\n      setResults(results);\r\n      console.log('results', results);\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"min-h-screen w-full bg-slate-800 text-white\">\r\n      <div className=\"flex min-h-screen flex-col justify-center gap-8 p-8\">\r\n        <h1 className=\"text-center text-5xl font-bold\">Final Result</h1>\r\n\r\n        {/* Top Players */}\r\n        <h1 className=\"text-center text-3xl font-bold\">Top Players</h1>\r\n        <div className=\"mx-auto flex w-full flex-col gap-4 md:w-1/2 xl:w-1/3\">\r\n          {results?.usersRankedByScore.map((player) => (\r\n            <div key={player.name} className=\"flex items-center gap-4 rounded-lg bg-slate-700 p-6\">\r\n              <Avatar size=\"large\" icon={<UserOutlined />} />\r\n              <div className=\"flex flex-1 items-center justify-between\">\r\n                <span className=\"text-xl font-semibold\">{player.name}</span>\r\n                <span className=\"text-xl font-bold\">{player.score} points</span>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Question Results */}\r\n        {results?.questionResults.map((result, index) => (\r\n          <QuestionResult key={index} results={result} questionPosition={index + 1} />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FinalResult;\r\n","const QuestionClose: React.FC = () => {\r\n  return (\r\n    <div className=\"h-screen w-full bg-slate-800 text-white\">\r\n      <div className=\"flex h-full flex-col p-8\">\r\n        <div className=\"flex flex-1 items-center justify-center\">\r\n          <h1 className=\"text-center text-5xl font-bold\">Question Closed</h1>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default QuestionClose;\r\n","import { useState, createContext, useMemo, useEffect } from 'react';\r\nimport QuestionOpen from './QuestionOpen';\r\nimport AnswerShow from './AnswerShow';\r\nimport FinalResult from './FinalResult';\r\nimport { playerGetStatusInSession } from '@/apis/quiz';\r\nimport { useSearchParams } from 'react-router-dom';\r\nimport { catchAxiosError } from '@/utils/helpers';\r\nimport QuestionClose from './QuestionClose';\r\nimport { QuizSessionState as S } from '@/types/Enums';\r\nimport { PlayerGetQuestionInfoReturned } from '@/types/ApiReturnType';\r\n\r\ntype StateContextType = {\r\n  state: S;\r\n  numQuestions: number;\r\n  atQuestion: number;\r\n  playerId: number;\r\n  question: PlayerGetQuestionInfoReturned | undefined;\r\n};\r\n\r\nexport const StateContext = createContext<StateContextType>({\r\n  state: S.LOBBY,\r\n  numQuestions: -1,\r\n  atQuestion: -1,\r\n  playerId: -1,\r\n  question: undefined,\r\n});\r\n\r\nconst PlayerLobby: React.FC = () => {\r\n  console.log('QuizSession loaded');\r\n  const [searchParams] = useSearchParams();\r\n\r\n  // Cache context value using useMemo, avoiding unnecessary re-renders of every sub-component\r\n  let con = useMemo(\r\n    () => ({\r\n      state: S.LOBBY,\r\n      numQuestions: 0,\r\n      atQuestion: 0,\r\n      playerId: parseInt(searchParams.get('playerId') || '-1'),\r\n      question: undefined,\r\n    }),\r\n    []\r\n  );\r\n\r\n  const [state, setState] = useState<S>(con.state);\r\n\r\n  const fetchStatus = async () => {\r\n    await catchAxiosError(async () => {\r\n      // Player side\r\n      const {\r\n        data: { state: newState, numQuestions: newNumQuestions, atQuestion: newAtQuestion },\r\n      } = await playerGetStatusInSession(con.playerId);\r\n\r\n      if (newState !== con.state) {\r\n        console.log(`${con.state} -> ${newState}`);\r\n        con.state = newState;\r\n        setState(newState);\r\n      }\r\n      if (newNumQuestions !== con.numQuestions) {\r\n        con.numQuestions = newNumQuestions;\r\n      }\r\n      if (newAtQuestion !== con.atQuestion) {\r\n        con.atQuestion = newAtQuestion;\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    console.log('useEffect');\r\n\r\n    const intervalId = setInterval(fetchStatus, 2000);\r\n    return () => clearInterval(intervalId);\r\n  }, []);\r\n\r\n  return (\r\n    <StateContext.Provider value={con}>\r\n      <div className=\"min-h-screen w-full bg-slate-800 text-white\">\r\n        {con.state === S.LOBBY && (\r\n          <h1 className=\"absolute inset-0 flex items-center justify-center text-center text-5xl font-bold\">\r\n            Waiting for game to start...\r\n          </h1>\r\n        )}\r\n        {(con.state === S.QUESTION_OPEN || con.state === S.QUESTION_COUNTDOWN) && <QuestionOpen />}\r\n        {con.state === S.QUESTION_CLOSE && <QuestionClose />}\r\n        {con.state === S.ANSWER_SHOW && <AnswerShow />}\r\n        {con.state === S.FINAL_RESULTS && <FinalResult />}\r\n        {con.state === S.END && (\r\n          <div className=\"flex h-screen items-center justify-center text-center text-5xl font-bold\">\r\n            Game Ended\r\n          </div>\r\n        )}\r\n      </div>\r\n    </StateContext.Provider>\r\n  );\r\n};\r\n\r\nexport default PlayerLobby;\r\n","// State of a quiz session\r\nexport enum QuizSessionState {\r\n  LOBBY = 'LOBBY',\r\n  QUESTION_COUNTDOWN = 'QUESTION_COUNTDOWN',\r\n  QUESTION_OPEN = 'QUESTION_OPEN',\r\n  QUESTION_CLOSE = 'QUESTION_CLOSE',\r\n  ANSWER_SHOW = 'ANSWER_SHOW',\r\n  FINAL_RESULTS = 'FINAL_RESULTS',\r\n  END = 'END',\r\n}\r\n\r\n// Action that can be taken in a quiz session\r\nexport enum PlayerAction {\r\n  NEXT_QUESTION = 'NEXT_QUESTION',\r\n  SKIP_COUNTDOWN = 'SKIP_COUNTDOWN',\r\n  GO_TO_ANSWER = 'GO_TO_ANSWER',\r\n  GO_TO_FINAL_RESULTS = 'GO_TO_FINAL_RESULTS',\r\n  END = 'END',\r\n}\r\n\r\nexport enum Color {\r\n  RED = 'red',\r\n  BLUE = 'blue',\r\n  GREEN = 'green',\r\n  YELLOW = 'yellow',\r\n  PURPLE = 'purple',\r\n  BROWN = 'brown',\r\n  ORANGE = 'orange',\r\n}\r\n","import { message } from 'antd';\r\nimport { AxiosError } from 'axios';\r\n\r\nexport async function catchAxiosError(fn: (...args: any[]) => unknown) {\r\n  try {\r\n    await fn();\r\n  } catch (error) {\r\n    if (error instanceof AxiosError) {\r\n      return message.error(error.response?.data?.error || 'Internal server error');\r\n    }\r\n    if (error instanceof Error) {\r\n      return message.error(error.message);\r\n    }\r\n    \r\n    return message.error('An unknown error occurred');\r\n  }\r\n}\r\n","// This icon file is generated automatically.\nvar UserOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z\" } }] }, \"name\": \"user\", \"theme\": \"outlined\" };\nexport default UserOutlined;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nimport * as React from 'react';\nimport UserOutlinedSvg from \"@ant-design/icons-svg/es/asn/UserOutlined\";\nimport AntdIcon from \"../components/AntdIcon\";\nvar UserOutlined = function UserOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _extends({}, props, {\n    ref: ref,\n    icon: UserOutlinedSvg\n  }));\n};\n\n/**![user](data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIGZpbGw9IiNjYWNhY2EiIHZpZXdCb3g9IjY0IDY0IDg5NiA4OTYiIGZvY3VzYWJsZT0iZmFsc2UiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTg1OC41IDc2My42YTM3NCAzNzQgMCAwMC04MC42LTExOS41IDM3NS42MyAzNzUuNjMgMCAwMC0xMTkuNS04MC42Yy0uNC0uMi0uOC0uMy0xLjItLjVDNzE5LjUgNTE4IDc2MCA0NDQuNyA3NjAgMzYyYzAtMTM3LTExMS0yNDgtMjQ4LTI0OFMyNjQgMjI1IDI2NCAzNjJjMCA4Mi43IDQwLjUgMTU2IDEwMi44IDIwMS4xLS40LjItLjguMy0xLjIuNS00NC44IDE4LjktODUgNDYtMTE5LjUgODAuNmEzNzUuNjMgMzc1LjYzIDAgMDAtODAuNiAxMTkuNUEzNzEuNyAzNzEuNyAwIDAwMTM2IDkwMS44YTggOCAwIDAwOCA4LjJoNjBjNC40IDAgNy45LTMuNSA4LTcuOCAyLTc3LjIgMzMtMTQ5LjUgODcuOC0yMDQuMyA1Ni43LTU2LjcgMTMyLTg3LjkgMjEyLjItODcuOXMxNTUuNSAzMS4yIDIxMi4yIDg3LjlDNzc5IDc1Mi43IDgxMCA4MjUgODEyIDkwMi4yYy4xIDQuNCAzLjYgNy44IDggNy44aDYwYTggOCAwIDAwOC04LjJjLTEtNDcuOC0xMC45LTk0LjMtMjkuNS0xMzguMnpNNTEyIDUzNGMtNDUuOSAwLTg5LjEtMTcuOS0xMjEuNi01MC40UzM0MCA0MDcuOSAzNDAgMzYyYzAtNDUuOSAxNy45LTg5LjEgNTAuNC0xMjEuNlM0NjYuMSAxOTAgNTEyIDE5MHM4OS4xIDE3LjkgMTIxLjYgNTAuNFM2ODQgMzE2LjEgNjg0IDM2MmMwIDQ1LjktMTcuOSA4OS4xLTUwLjQgMTIxLjZTNTU3LjkgNTM0IDUxMiA1MzR6IiAvPjwvc3ZnPg==) */\nvar RefIcon = /*#__PURE__*/React.forwardRef(UserOutlined);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'UserOutlined';\n}\nexport default RefIcon;","import axios from './lib/axios.js';\n\n// This module is intended to unwrap Axios default export as named.\n// Keep top-level export same with static properties\n// so that it can keep same with es module or cjs\nconst {\n  Axios,\n  AxiosError,\n  CanceledError,\n  isCancel,\n  CancelToken,\n  VERSION,\n  all,\n  Cancel,\n  isAxiosError,\n  spread,\n  toFormData,\n  AxiosHeaders,\n  HttpStatusCode,\n  formToJSON,\n  getAdapter,\n  mergeConfig\n} = axios;\n\nexport {\n  axios as default,\n  Axios,\n  AxiosError,\n  CanceledError,\n  isCancel,\n  CancelToken,\n  VERSION,\n  all,\n  Cancel,\n  isAxiosError,\n  spread,\n  toFormData,\n  AxiosHeaders,\n  HttpStatusCode,\n  formToJSON,\n  getAdapter,\n  mergeConfig\n}\n"],"names":["PlayerList","_ref","players","_jsx","className","children","map","player","_jsxs","Avatar","size","src","progress","barColor","style","width","transition","QuestionOpen","state","atQuestion","playerId","useContext","StateContext","question","setQuestion","useState","undefined","useEffect","S","QUESTION_OPEN","catchAxiosError","async","data","playerGetQuestionInfo","setProgress","answerDisplay","setAnswerDisplay","setBarColor","selectedAnswerIds","setSelectedAnswerIds","Set","interval","startTime","Date","now","grow","elapsedTime","newProgress","Math","min","clearInterval","shrink","max","duration","setInterval","ProgressBar","answers","a","has","answerId","onClick","message","warning","delete","add","playerSubmitAnswer","Array","from","answer","QuestionResult","_results$playersCorre2","results","questionPosition","averageAnswerTime","percentCorrect","playersCorrectList","AnswerShow","_results$playersCorre","setResults","playerGetQuestionResult","console","log","FinalResult","playerGetSessionResult","usersRankedByScore","icon","UserOutlined","name","score","questionResults","result","index","QuestionClose","createContext","LOBBY","numQuestions","PlayerLobby","searchParams","useSearchParams","con","useMemo","parseInt","get","setState","fetchStatus","newState","newNumQuestions","newAtQuestion","playerGetStatusInSession","intervalId","Provider","value","QUESTION_COUNTDOWN","QUESTION_CLOSE","ANSWER_SHOW","FINAL_RESULTS","END","QuizSessionState","PlayerAction","fn","error","_error$response","_error$response$data","AxiosError","response","Error","props","ref","React","AntdIcon","_extends","UserOutlinedSvg","Axios","CanceledError","isCancel","CancelToken","VERSION","all","Cancel","isAxiosError","spread","toFormData","AxiosHeaders","HttpStatusCode","formToJSON","getAdapter","mergeConfig","axios"],"sourceRoot":""}